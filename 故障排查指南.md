# 🔧 故障排查指南 - 看不到新 UI？

## ✅ 步骤 1：确认 API Key 已更新

1. **访问**：https://share.streamlit.io/
2. **登录**你的账号
3. **找到应用**：`video-search-agent`
4. **点击**右下角的 **"Manage app"**
5. **左侧菜单**选择 **"⚙️ Settings"**
6. **点击 "Secrets"** 标签
7. **确认内容是否为**：

```toml
GEMINI_API_KEY = "AIzaSyAVYeFP0jyEJLWiW38ploY0vs8i2GjiSi0"
YOUTUBE_API_KEY = "AIzaSyAVYeFP0jyEJLWiW38ploY0vs8i2GjiSi0"
```

❌ **如果不是**，请复制粘贴上面的内容，点击 **"Save"**

---

## ✅ 步骤 2：等待部署完成

1. 在 **Manage app** 页面，点击 **"Logs"**
2. 查看最后几行日志：
   - ✅ 看到 `App is live at: https://...` 表示部署完成
   - ⏳ 看到 `Building...` 表示还在部署中，**等待 2-3 分钟**
   - ❌ 看到红色错误，截图发给我

3. **如果一直没有部署**：
   - 点击右上角的 **"⋮"** (三个点)
   - 选择 **"Reboot app"** 强制重启

---

## ✅ 步骤 3：清除浏览器缓存

1. **访问应用**：https://video-search-agent-smfrxp96bjth8s4bh7zyj7.streamlit.app/
2. **强制刷新**：
   - **Windows**: `Ctrl + Shift + R`
   - **Mac**: `Cmd + Shift + R`
3. **或者使用无痕模式**：
   - `Ctrl/Cmd + Shift + N` (Chrome)
   - 重新打开应用链接

---

## ✅ 步骤 4：搜索新关键词

⚠️ **重要**：旧的搜索结果是**缓存的**，不会有新功能！

❌ **不要搜索**：
- 你之前搜索过的关键词
- 例如：如果你之前搜索过 "marketing"，缓存会返回旧结果

✅ **请搜索新的关键词**：
- ✅ "content creation"
- ✅ "youtube growth"
- ✅ "自媒体运营" (会自动翻译)
- ✅ "video editing tips"

---

## ✅ 步骤 5：检查新功能是否显示

搜索后，**每个视频卡片**应该显示：

```
📺 视频标题
👤 作者: xxx
👁️ 播放量: xxx
📅 发布: xx 天前

🎣 核心吸引点: xxxxxx          ← 新增！
♻️ 可复制性: 🟢 9/10 分         ← 新增！
💡 关键学习点: xxx,xxx,xxx      ← 新增！
⭐ 成功原因: xxxxxxxxx          ← 新增！

[🎬 观看视频] [👤 访问主页]
```

---

## 🆘 如果还是看不到

### 方案 A：在本地运行测试

```bash
cd /Users/x.sean/Desktop/小红书视频下载
streamlit run app.py
```

然后在浏览器访问 `http://localhost:8501`

### 方案 B：检查是否是缓存问题

在 Streamlit 应用中：
1. **左侧边栏**找到 **"高级选项"**
2. **取消勾选** "启用缓存"
3. 重新搜索

### 方案 C：查看完整日志

1. Manage app → Logs
2. 截图最后 50 行日志
3. 发给我分析

---

## 🎯 快速测试方法

**在本地运行演示**：
```bash
cd /Users/x.sean/Desktop/小红书视频下载
python3 demo_ui.py
```

如果本地能看到新功能，说明代码没问题，只是 Streamlit Cloud 的部署或缓存问题。

---

## 📸 对比截图

### ❌ 旧版 UI（没有新功能）
```
📺 视频标题
👤 作者: xxx
👁️ 播放量: xxx
📅 发布: xx 天前
💬 推荐理由: 内容实用    ← 只有这个

[🎬 观看视频] [👤 访问主页]
```

### ✅ 新版 UI（有新功能）
```
📺 视频标题
👤 作者: xxx
👁️ 播放量: xxx
📅 发布: xx 天前

🎣 核心吸引点: 7天涨粉10万实战    ← 新增
♻️ 可复制性: 🟢 9/10 分           ← 新增
💡 关键学习点: 钩子,框架,CTA      ← 新增
⭐ 成功原因: 真实案例+详细步骤    ← 新增

[🎬 观看视频] [👤 访问主页]
```

---

## 💡 最可能的问题

根据经验，90% 的情况是：

1. **API Key 没更新** (40%)
2. **看的是缓存结果** (30%)
3. **浏览器缓存** (20%)
4. **部署还没完成** (10%)

---

**请按顺序检查这 5 个步骤，告诉我卡在哪一步！** 🚀

